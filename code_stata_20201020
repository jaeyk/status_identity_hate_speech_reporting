* Stata code for "metoo_raw_dataset_20201020.csv"
* Written by Jaeung Sim
* Updated on October 20, 2020

import delimited "C:\Graduate Research\Working Papers (Realized)\MeToo #1 Framing Contest\Data and Analysis\Code-Data Sharing\metoo_raw_dataset_20201020.csv", encoding(UTF-8)

** Variable Normalization
egen z2comm_report = std(comm_report)
egen z2youtube_regulation = std(youtube_regulation)
egen z2law_company = std(law_company)

** Manipulation Checks
ttest reply_user_male, by(treated_male)
ttest reply_user_female, by(treated_male)
ttest reply_upvotes, by(treated_upvotes)

** Table 1. Summary Statistics
* Dependent Variables
summarize comm_report comm_attitude comm_user_attitude reply_attitude reply_user_attitude youtube_regulation law_company, separator(0)
* Independent Variables
summarize metoo_attitude male age education income poli_conserv_fill party_liberal party_conserv, separator(0)

** Table 2. Effects of Counter Speech on Intention to Report Hate Speech by Gender and Age
reg z2comm_report i.group male age poli_conserv_fill party_liberal party_conserv metoo_attitude education income if male==0, r
reg z2comm_report i.group male age poli_conserv_fill party_liberal party_conserv metoo_attitude education income if male==1, r
reg z2comm_report i.group male age poli_conserv_fill party_liberal party_conserv metoo_attitude education income if age<40, r
reg z2comm_report i.group male age poli_conserv_fill party_liberal party_conserv metoo_attitude education income if age>=40, r

** Table 3. Effects of Counter Speech on Intention to Report Hate Speech by Support for the Me Too Movement
* Check the median 
codebook metoo_attitude
* Regressions
reg z2comm_report i.group male age poli_conserv_fill party_liberal party_conserv metoo_attitude education income if metoo_attitude<=3, r
reg z2comm_report i.group male age poli_conserv_fill party_liberal party_conserv metoo_attitude education income if metoo_attitude>3, r

** Table 4. Effects of Counter Speech on Support for Hate-Speech Regulations
* Internal Regulation (YouTube)
reg youtube_regulation i.group male age poli_conserv_fill party_liberal party_conserv metoo_attitude education income, r
reg youtube_regulation i.group male age poli_conserv_fill party_liberal party_conserv metoo_attitude education income if metoo_attitude<=3, r
reg youtube_regulation i.group male age poli_conserv_fill party_liberal party_conserv metoo_attitude education income if metoo_attitude>3, r
* External Regulation (Law)
reg law_company i.group male age poli_conserv_fill party_liberal party_conserv metoo_attitude education income, r
reg law_company i.group male age poli_conserv_fill party_liberal party_conserv metoo_attitude education income if metoo_attitude<=3, r
reg law_company i.group male age poli_conserv_fill party_liberal party_conserv metoo_attitude education income if metoo_attitude>3, r

** Figure 2. Intention to Report the Comment by Group
collapse (mean) comm_report (sem) seb_comm_report=comm_report, by(group)
gen comm_report_upper95 = comm_report + 1.9618567 * seb_comm_report
gen comm_report_lower95 = comm_report - 1.9618567 * seb_comm_report
twoway (scatter comm_report group) (rcap comm_report_upper95 comm_report_lower95 group), xlabel(1 "Control" 2 "Female" 3 "Female+Upvotes" 4 "Male" 5 "Male+Upvotes")
